{% extends 'base_inventario.html.twig' %}
{% block content %}
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th>ID</th>
                <th>NUMERO</th>
                <th>TERCERO</th>
                <th>FECHA</th>
                <th>SUBTOTAL</th>
                <th>IVA</th>
                <th>DCT</th>
                <th>NETO</th>
                <th>TOTAL</th>
                <th>AUT</th>
                <th>APR</th>
                <th>ANU</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for arMovimiento in arMovimientos %}
                <tr>
                    {{ validarTipo(arMovimiento.codigoMovimientoPk ) }}
                    {{ validarTipo(arMovimiento.numero) }}
                    {{ validarTipo(arMovimiento.terceroRel.nombreCorto ) }}
                    {{ validarTipo(arMovimiento.fecha) }}
                    <td class="numero">{{ arMovimiento.vrSubtotal | number_format(0, '.', ',') }}</td>
                    <td class="numero">{{ arMovimiento.vrIva | number_format(0, '.', ',') }}</td>
                    <td class="numero">{{ arMovimiento.vrDescuento | number_format(0, '.', ',') }}</td>
                    <td class="numero">{{ arMovimiento.vrNeto | number_format(0, '.', ',') }}</td>
                    <td class="numero">{{ arMovimiento.vrTotal | number_format(0, '.', ',') }}</td>
                    <td class="estado">{{ arMovimiento.estadoAutorizado?'SI':'NO' }}</td>
                    <td class="estado">{{ arMovimiento.estadoAprobado?'SI':'NO' }}</td>
                    <td class="estado">{{ arMovimiento.estadoAnulado?'SI':'NO' }}</td>
                    <td style="text-align: center;">
                        {% if not arMovimiento.estadoAutorizado %}
                            {% if tipoDocumento != 'FAC' %}
                                <a href="{{ path('inventario_movimiento_inventario_movimiento_nuevo', {'codigoDocumento':arMovimiento.codigoDocumentoFk,'id': arMovimiento.codigoMovimientoPk}) }}">
                                    <i class="fa fa-edit" style="font-size: large">
                                    </i>
                                </a>
                            {% else %}
                                <a href="{{ path('inventario_movimiento_inventario_movimiento_nuevo_factura', {'codigoDocumento':arMovimiento.codigoDocumentoFk,'id': arMovimiento.codigoMovimientoPk}) }}">
                                    <i class="fa fa-edit" style="font-size: large">
                                    </i>
                                </a>
                            {% endif %}
                        {% endif %}
                    </td>
                    <td style="text-align: center;">
                        <a href="{{ path('inventario_movimiento_inventario_movimiento_detalle', {'id' : arMovimiento.codigoMovimientoPk }) }}">
                            <i class="fa fa-share-square-o" style="font-size: large">
                            </i>
                        </a>
                    </td>
                    <td style="text-align: center;"><input type="checkbox" name="ChkSeleccionar[]" value="{{ arMovimiento.codigoMovimientoPk }}"></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="btn-group" style="float: right;">
        {% if tipoDocumento != 'FAC' %}
            <a class="btn btn-sm btn-default"
               href="{{ path('inventario_movimiento_inventario_movimiento_nuevo',{'codigoDocumento': codigoDocumento,'id' : 0 }) }}">Nuevo</a>
        {% else %}
            <a class="btn btn-sm btn-default"
               href="{{ path('inventario_movimiento_inventario_movimiento_nuevo_factura',{'codigoDocumento': codigoDocumento,'id' : 0 }) }}">Nuevo</a>
        {% endif %}
    </div>
    <div class="btn-group">
        <a class="btn btn-sm btn-default"
           href="{{ path('inventario_movimiento_inventario_movimiento_documentos_lista',{'tipoDocumento': tipoDocumento}) }}">volver</a>
    </div>
{% endblock %}
